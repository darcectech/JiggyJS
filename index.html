<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game Demo</title>
    <script src="src/jiggy.js"></script>
</head>
<body>
    <script>
        const game = new Game();
        const player = new GameEntity(); // When only one Game is initialized, gameEntity will automatically register

        // When initializing multiple Games, use isRegistered to check if game is in single instance
        // When in multiple instances, entities will have to be registed with the game manually

        //OPTIONAL
        game.onUpdate(function(logic,mousePos,gameKeys,activeKeys){
            if (activeKeys().length != 0) game.debug.log(activeKeys());
        });

        //OPTIONAL
        game.onRender(function(canvasContext){
            canvasContext.fillStyle = '#6500AA';
            canvasContext.fillRect(0,0,game.width,game.height);
            game.debug.log('DRAWING CANVAS');
        });

        // Register keyboard key combinations to a handler
        game.registerKeyCombination(['SPACE'],function(mousePos){


            if (player.x > mousePos.x){
                player.x -= 1;
            }
            else if (player.x < mousePos.x){
                player.x += 1;
            }

            if (player.y > mousePos.y){
                player.y -= 1;
            }
            else if (player.y < mousePos.y){
                player.y += 1;
            }

            player.dirty();

        });

        // draw game board
        player.onRender(function(gameboard , pos , size){
            gameboard.context.fillStyle = '#FF0000';
            gameboard.context.fillRect(pos.x,pos.y,size.width,size.height);
        });

        player.ignoreGravity = true; // disable gravity effect on the entity

        game.setFlags(['NO_ALERT']); // add DEBUGGING to see console output from game

        game.performance.smartBalance = true; // automatically update FPS based on performance

        game.start(30);
    </script>
</body>
</html>